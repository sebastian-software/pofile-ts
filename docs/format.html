<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PO File Format — pofile-ts</title>
    <meta
      name="description"
      content="Understanding the GNU gettext PO file format: structure, plurals, and content formats."
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="layout">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <a href="index.html" class="sidebar-logo">
          <img src="logo.svg" alt="pofile-ts" />
          <span>pofile-ts</span>
        </a>

        <nav class="sidebar-nav">
          <div class="sidebar-section">
            <div class="sidebar-section-title">Getting Started</div>
            <a href="index.html" class="sidebar-link">Overview</a>
            <a href="guide.html" class="sidebar-link">Quick Start</a>
            <a href="guide.html#helpers" class="sidebar-link">i18n Helpers</a>
          </div>

          <div class="sidebar-section">
            <div class="sidebar-section-title">Reference</div>
            <a href="format.html" class="sidebar-link active">PO File Format</a>
            <a href="api.html" class="sidebar-link">API Reference</a>
            <a href="api.html#options" class="sidebar-link">Options</a>
          </div>

          <div class="sidebar-section">
            <div class="sidebar-section-title">More</div>
            <a href="migration.html" class="sidebar-link">Migration Guide</a>
            <a
              href="https://github.com/sebastian-software/pofile-ts"
              class="sidebar-link"
              target="_blank"
              rel="noopener"
              >GitHub ↗</a
            >
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main">
        <button class="mobile-menu-toggle" onclick="toggleMenu()" aria-label="Toggle menu">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="18" x2="21" y2="18" />
          </svg>
        </button>

        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
          <svg
            class="sun"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="12" r="5" />
            <line x1="12" y1="1" x2="12" y2="3" />
            <line x1="12" y1="21" x2="12" y2="23" />
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
            <line x1="1" y1="12" x2="3" y2="12" />
            <line x1="21" y1="12" x2="23" y2="12" />
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
          </svg>
          <svg
            class="moon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>

        <div class="container">
          <header class="compact">
            <h1 class="page-title">PO File Format</h1>
            <p class="page-subtitle">
              Understanding the GNU gettext PO file structure and content formats.
            </p>
          </header>

          <!-- Structure -->
          <section>
            <h2>What We Support</h2>
            <p>
              The
              <a
                href="https://www.gnu.org/software/gettext/manual/html_node/PO-Files.html"
                target="_blank"
                rel="noopener"
                >PO (Portable Object) format</a
              >
              is the standard for software translation since the 1990s. pofile-ts fully supports
              this format:
            </p>

            <table class="api-table">
              <thead>
                <tr>
                  <th>Feature</th>
                  <th>Supported</th>
                  <th>Example</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Singular translations</td>
                  <td>✅</td>
                  <td><code>msgid</code> / <code>msgstr</code></td>
                </tr>
                <tr>
                  <td>
                    <a
                      href="https://www.gnu.org/software/gettext/manual/html_node/Plural-forms.html"
                      target="_blank"
                      rel="noopener"
                      >Plural forms</a
                    >
                  </td>
                  <td>✅</td>
                  <td>
                    <code>msgid_plural</code> / <code>msgstr[0]</code>, <code>msgstr[1]</code>, ...
                  </td>
                </tr>
                <tr>
                  <td>Message context</td>
                  <td>✅</td>
                  <td><code>msgctxt</code></td>
                </tr>
                <tr>
                  <td>Comments</td>
                  <td>✅</td>
                  <td><code>#</code>, <code>#.</code>, <code>#:</code>, <code>#,</code></td>
                </tr>
                <tr>
                  <td>Flags</td>
                  <td>✅</td>
                  <td><code>fuzzy</code>, <code>no-wrap</code>, etc.</td>
                </tr>
                <tr>
                  <td>Obsolete entries</td>
                  <td>✅</td>
                  <td><code>#~</code></td>
                </tr>
                <tr>
                  <td>All UTF-8 content</td>
                  <td>✅</td>
                  <td>—</td>
                </tr>
              </tbody>
            </table>
          </section>

          <!-- Content Agnostic -->
          <section id="content-agnostic">
            <h2>Content Agnostic</h2>
            <p>
              pofile-ts parses the <strong>PO structure</strong> — it doesn't interpret what's
              inside <code>msgid</code> or <code>msgstr</code>. Your strings can contain:
            </p>
            <ul>
              <li>Plain text: <code>"Hello, World!"</code></li>
              <li>
                <a
                  href="https://unicode-org.github.io/icu/userguide/format_parse/messages/"
                  target="_blank"
                  rel="noopener"
                  >Unicode ICU MessageFormat</a
                >
                (v1): <code>"{count, plural, one {# item} other {# items}}"</code>
              </li>
              <li>
                <a
                  href="https://unicode-org.github.io/icu/userguide/format_parse/messages/mf2.html"
                  target="_blank"
                  rel="noopener"
                  >Unicode MessageFormat 2.0</a
                >: <code>.match {$count} one {{...}} * {{...}}</code>
              </li>
              <li>Any other format your i18n library uses</li>
            </ul>
            <p>
              This makes pofile-ts a <strong>universal PO parser</strong> that works with any
              translation workflow.
            </p>

            <div class="info-box">
              <p>
                <strong>Important:</strong> There is no normalization between formats. Native
                Gettext plurals and ICU-embedded plurals result in different data structures:
              </p>
            </div>

            <pre><span class="code-comment">// Native Gettext: msgid_plural set, msgstr has multiple entries</span>
{ <span class="code-type">msgid_plural</span>: <span class="code-string">"{count} items"</span>, <span class="code-type">msgstr</span>: [<span class="code-string">"Ein Element"</span>, <span class="code-string">"{count} Elemente"</span>] }

<span class="code-comment">// ICU embedded: msgid_plural null, msgstr has one entry with ICU syntax</span>
{ <span class="code-type">msgid_plural</span>: <span class="code-keyword">null</span>, <span class="code-type">msgstr</span>: [<span class="code-string">"{count, plural, one {...} other {...}}"</span>] }</pre>
          </section>

          <!-- Gettext vs ICU -->
          <section id="gettext-vs-icu">
            <h2>Gettext Plurals vs ICU Plurals</h2>
            <p>
              There are two ways to handle pluralization in PO files. Understanding the difference
              is important for choosing the right approach for your project.
            </p>

            <h3>Native Gettext Plurals</h3>
            <p>
              The original
              <a
                href="https://www.gnu.org/software/gettext/manual/html_node/Plural-forms.html"
                target="_blank"
                rel="noopener"
                >Gettext plural system</a
              >
              uses <strong>indexed forms</strong> defined by a formula in the header:
            </p>

            <pre><span class="code-comment"># Header defines plural rules</span>
<span class="code-string">"Plural-Forms: nplurals=2; plural=(n != 1);\n"</span>

<span class="code-comment"># German (2 forms: singular, plural)</span>
msgid <span class="code-string">"One item"</span>
msgid_plural <span class="code-string">"{count} items"</span>
msgstr[<span class="code-number">0</span>] <span class="code-string">"Ein Element"</span>
msgstr[<span class="code-number">1</span>] <span class="code-string">"{count} Elemente"</span>

<span class="code-comment"># Arabic (6 forms: zero, one, two, few, many, other)</span>
msgstr[<span class="code-number">0</span>] <span class="code-string">"..."</span>  <span class="code-comment"># zero</span>
msgstr[<span class="code-number">1</span>] <span class="code-string">"..."</span>  <span class="code-comment"># one</span>
msgstr[<span class="code-number">2</span>] <span class="code-string">"..."</span>  <span class="code-comment"># two</span>
msgstr[<span class="code-number">3</span>] <span class="code-string">"..."</span>  <span class="code-comment"># few</span>
msgstr[<span class="code-number">4</span>] <span class="code-string">"..."</span>  <span class="code-comment"># many</span>
msgstr[<span class="code-number">5</span>] <span class="code-string">"..."</span>  <span class="code-comment"># other</span></pre>

            <h3>ICU MessageFormat (embedded in msgstr)</h3>
            <p>
              Libraries like <a href="https://lingui.dev/" target="_blank" rel="noopener">Lingui</a>
              embed
              <a
                href="https://unicode-org.github.io/icu/userguide/format_parse/messages/"
                target="_blank"
                rel="noopener"
                >ICU MessageFormat</a
              >
              syntax directly in the <code>msgstr</code>:
            </p>

            <pre><span class="code-comment"># ICU plural embedded in single msgstr</span>
msgid <span class="code-string">"{count, plural, one {# item} other {# items}}"</span>
msgstr <span class="code-string">"{count, plural, one {# Element} other {# Elemente}}"</span></pre>

            <h3>Comparison</h3>
            <table class="api-table">
              <thead>
                <tr>
                  <th>Feature</th>
                  <th>Gettext Plurals</th>
                  <th>ICU in msgstr</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Plural forms</td>
                  <td>✅ Index-based (<code>msgstr[n]</code>)</td>
                  <td>✅ Named (<code>one</code>, <code>other</code>)</td>
                </tr>
                <tr>
                  <td>Select (gender)</td>
                  <td>❌</td>
                  <td>✅ <code>{gender, select, ...}</code></td>
                </tr>
                <tr>
                  <td>SelectOrdinal</td>
                  <td>❌</td>
                  <td>✅ <code>{n, selectordinal, ...}</code></td>
                </tr>
                <tr>
                  <td>Nested constructs</td>
                  <td>❌</td>
                  <td>✅</td>
                </tr>
                <tr>
                  <td>TMS support</td>
                  <td>✅ Native in Crowdin, etc.</td>
                  <td>⚠️ Requires ICU-aware tools</td>
                </tr>
                <tr>
                  <td>Translator UX</td>
                  <td>✅ Simple form per index</td>
                  <td>⚠️ Must understand ICU syntax</td>
                </tr>
              </tbody>
            </table>

            <p class="compat-note">
              <strong>TL;DR:</strong> Use native Gettext plurals for simple pluralization. Use ICU
              when you need select, selectordinal, or nested constructs.
            </p>
          </section>

          <footer>
            <p>
              Released under the
              <a href="https://github.com/sebastian-software/pofile-ts/blob/main/LICENSE"
                >MIT License</a
              >
            </p>
            <p class="credits">
              Maintained by <a href="https://sebastian-software.de/">Sebastian Software</a>
            </p>
          </footer>
        </div>
      </main>
    </div>

    <script>
      function toggleTheme() {
        const html = document.documentElement
        const current = html.getAttribute("data-theme")
        const next = current === "light" ? "dark" : "light"
        html.setAttribute("data-theme", next)
        localStorage.setItem("theme", next)
      }

      function toggleMenu() {
        document.getElementById("sidebar").classList.toggle("open")
      }

      const saved = localStorage.getItem("theme")
      if (saved) {
        document.documentElement.setAttribute("data-theme", saved)
      } else if (window.matchMedia("(prefers-color-scheme: light)").matches) {
        document.documentElement.setAttribute("data-theme", "light")
      }
    </script>
  </body>
</html>
